# 프로젝트 로드맵 및 아키텍처 개선 방향

이 문서는 AI-GF 프로젝트의 현재 상태를 진단하고, 장기적인 비전 달성을 위해 필요한 주요 과제들의 우선순위, 난이도, 중요도를 분석하여 향후 개발 방향을 제시하는 것을 목표로 합니다.

## 핵심 과제 우선순위 요약

| 우선순위 | 과제                               | 난이도 | 중요도   | 시급성   | 비고                                                 |
| :------- | :--------------------------------- | :----- | :------- | :------- | :--------------------------------------------------- |
| **1**    | **액션(Action) 등록 프로세스 자동화** | **-**  | **최상** | **-**    | **완료 (2025-08-02)**                                |
| **2**    | **자동화된 테스트 전략 도입**        | **중**   | **최상** | **최상** | 안정성 확보를 위한 다음 최우선 과제.               |
| **3**    | **상태 관리 가이드 문서화**          | **-**  | **중**   | **-**    | **완료 (2025-08-02)**                                |
| **4**    | **노드 그래프 시스템 ("시퀀스") 개발** | **최상** | **최상** | **중**   | 프로젝트의 최종 비전. 2번 과제 선행이 필수.        |
| **5**    | **`PluginContext` 불일치 문제 해결**   | **상**   | **상**   | **하**   | 장기적인 아키텍처 숙제. 단기 영향은 적음.          |

---

## 1. 액션(Action) 등록 프로세스 자동화 (`ActionRegistry` 도입) - ✨ 완료

-   **상태**: **완료 (2025-08-02)**
-   **개선 결과**:
    -   **중앙 집중 관리**: `ActionRegistry` (`src/core/action-registry.ts`)를 도입하여, 액션의 정의(메타데이터)와 구현(실행 함수)을 한 곳에서 등록하고 관리하는 중앙 저장소를 마련했습니다.
    -   **등록 로직 단일화**: 모든 코어 액션을 `ActionRegistry`에 등록하는 로직을 `action-registrar.ts` (`src/core/action-registrar.ts`) 파일로 중앙화했습니다. **이제 새로운 코어 액션을 추가하려면 이 파일 하나만 수정하면 됩니다.**
    -   **동적 `PluginContext` 생성**: 렌더러의 `context-factory.ts`는 `ActionRegistry`로부터 정보를 받아 동적으로 `actions` 객체를 생성하도록 리팩토링되었습니다. 더 이상 수동으로 액션을 추가할 필요가 없습니다.
    -   **동적 IPC 프록시 생성**: 메인 프로세스의 `mod-loader.ts`는 렌더러로부터 받은 액션 명세에 따라 IPC 프록시를 동적으로 생성하여 모드(Mod)에 제공합니다. 이로 인해 유지보수성이 크게 향상되었습니다.
    -   **단일화된 IPC 채널**: `set-action-definitions`와 `proxy-action`이라는 단일화된 IPC 채널을 통해 메인-렌더러 간 액션 통신이 이루어지도록 구조를 개선했습니다.
-   **기대 효과**: 개발 생산성과 안정성이 크게 향상되었습니다. 특히 향후 '노드 그래프 시스템' 개발 시, 새로운 액션 기반 노드를 매우 빠르고 안정적으로 추가할 수 있는 핵심 기반이 성공적으로 마련되었습니다.

## 2. 자동화된 테스트 전략 도입

-   **상태**: **진행 중 (기반 환경 구축 완료)**
-   **진행 상황 (2025-08-02)**:
    -   **테스트 환경 구축**: `Jest`, `React Testing Library`, `ts-jest` 등 필요한 모든 테스트 라이브러리를 설치하고, `jest.config.js` 파일을 통해 TypeScript 및 React 컴포넌트를 테스트할 수 있는 환경 설정을 완료했습니다.
    -   **테스트 스크립트 추가**: `package.json`에 `npm test` 스크립트를 추가하여 테스트를 실행할 수 있는 공식적인 방법을 마련했습니다.
    -   **개념 증명(PoC) 테스트 작성**: 테스트 환경이 올바르게 작동하는지 검증하기 위해, 핵심 로직 중 하나인 `ActionRegistry`에 대한 단위 테스트(`action-registry.test.ts`)를 작성하여 성공적으로 통과시켰습니다.
-   **남은 과제**:
    -   현재는 개념 증명을 위한 단일 테스트 파일만 존재하므로, 다른 핵심 로직(`TriggerEngine`, `ContextStore` 등)과 주요 React 컴포넌트에 대한 테스트 케이스를 점진적으로 추가하여 테스트 커버리지를 확보해야 합니다.
    -   배포 시 테스트 코드가 포함되지 않도록 번들러 및 패키저 설정을 확인하고 최적화해야 합니다.
-   **왜 시급한가?**: 프로젝트가 더 복잡해지기 전에 안정성의 기반을 다져야 합니다. 테스트 없는 대규모 리팩토링(예: 노드 그래프 시스템 도입)은 재앙으로 이어질 수 있습니다.

## 3. 상태 관리 가이드 문서화 - ✨ 완료

-   **상태**: **완료 (2025-08-02)**
-   **결과물**: `docs/State_Management_Guide.md`
-   **개선 결과**:
    -   `electron-store`, `AppContext`, `ContextStore` 세 가지 상태 관리 도구의 역할, 책임, 사용 사례를 명확하게 정의하는 공식 가이드 문서를 작성했습니다.
    -   개발자가 특정 상황에 어떤 도구를 사용해야 할지 쉽게 판단할 수 있도록 빠른 비교표와 의사결정 흐름도를 포함했습니다.
-   **기대 효과**: 개발자 간의 혼란을 줄이고 코드의 일관성을 확보하여, 장기적인 프로젝트 유지보수 비용을 감소시킬 수 있는 기반을 마련했습니다.

## 4. 노드 그래프 시스템 ("시퀀스") 개발

-   **현황**: 현재는 개별적인 트리거만 만들 수 있어, 복잡하고 유기적인 상호작용을 만드는 데 한계가 있습니다.
-   **개선 방향**: `React Flow`를 기반으로, 사용자가 노드를 시각적으로 연결하여 복잡한 상호작용 로직('시퀀스')을 만들 수 있는 비주얼 스크립팅 시스템을 개발합니다. (상세 내용은 `Vision_Visual_Scripting.md` 참고)
-   **왜 지금이 아닌가?**: 이 과제는 프로젝트의 최종 목표이지만, 매우 큰 작업입니다. 1번(액션 자동화)과 2번(테스트) 과제가 선행되지 않은 상태에서 이 개발에 착수하면, 낮은 생산성과 불안정한 기반 위에서 사상누각을 짓는 격이 될 것입니다. 기반을 다진 후, 집중적으로 진행해야 할 핵심 과제입니다.

## 5. `PluginContext` 불일치 문제 해결

-   **현황**: 코어 플러그인(렌더러)과 유저 모드(메인 프로세스)가 받는 `PluginContext`의 내용물이 달라, 기술적으로 완전한 동등성이 확보되지 않은 상태입니다.
-   **문제점**: "모든 플러그인은 동등하다"는 프로젝트의 핵심 철학에 완벽히 부합하지 않습니다.
-   **개선 방향**:
    -   **단기**: 모든 유용한 기능은 반드시 `Action`으로 만들어 공개하는 원칙을 엄격하게 지켜, 기능적 동등성을 유지합니다.
    -   **장기**: 유저 모드를 렌더러 프로세스 내의 격리된 환경(Web Worker 등)에서 실행하는 방안을 연구하여, 진정한 기술적 동등성을 확보합니다.
-   **왜 시급하지 않은가?**: 단기적인 해결책이 명확하고, 현재 시스템의 안정성에 직접적인 영향을 주지는 않습니다. 이는 프로젝트가 더 성숙해진 후에 도전할 만한, 중요하지만 시급하지는 않은 아키텍처 개선 과제입니다.