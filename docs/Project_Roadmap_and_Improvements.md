# 프로젝트 로드맵 및 아키텍처 개선 방향

이 문서는 AI-GF 프로젝트의 현재 상태를 진단하고, 장기적인 비전 달성을 위해 필요한 주요 과제들의 우선순위, 난이도, 중요도를 분석하여 향후 개발 방향을 제시하는 것을 목표로 합니다.

## 핵심 과제 우선순위 요약

| 우선순위 | 과제                               | 난이도 | 중요도   | 시급성   | 비고                                                 |
| :------- | :--------------------------------- | :----- | :------- | :------- | :--------------------------------------------------- |
| **1**    | **액션(Action) 등록 프로세스 자동화** | **-**  | **최상** | **-**    | **완료 (2025-08-02)**                                |
| **2**    | **자동화된 테스트 전략 도입**        | **중**   | **최상** | **최상** | 안정성 확보를 위한 다음 최우선 과제.               |
| **3**    | **상태 관리 가이드 문서화**          | **하**   | **중**   | **중**   | 개발자 간의 혼란을 줄이고 일관성을 확보.           |
| **4**    | **노드 그래프 시스템 ("시퀀스") 개발** | **최상** | **최상** | **중**   | 프로젝트의 최종 비전. 2번 과제 선행이 필수.        |
| **5**    | **`PluginContext` 불일치 문제 해결**   | **상**   | **상**   | **하**   | 장기적인 아키텍처 숙제. 단기 영향은 적음.          |

---

## 1. 액션(Action) 등록 프로세스 자동화 (`ActionRegistry` 도입) - ✨ 완료

-   **상태**: **완료 (2025-08-02)**
-   **개선 결과**:
    -   `src/core/action-registry.ts`: 액션을 등록하고 관리하는 `ActionRegistry` 클래스를 도입했습니다.
    -   `src/core/action-registrar.ts`: 모든 코어 액션의 정의(메타데이터)와 구현(실행 함수)을 한 곳에서 `ActionRegistry`에 등록하도록 중앙화했습니다.
    -   이제 새로운 액션을 추가하려면 **`action-registrar.ts` 파일 하나만 수정**하면 됩니다.
    -   `context-factory.ts`와 `mod-loader.ts`는 `ActionRegistry`에 등록된 정보를 바탕으로 `PluginContext`와 IPC 프록시를 동적으로 생성하도록 리팩토링되어, 더 이상 수동으로 수정할 필요가 없습니다.
-   **기대 효과**: 향후 '노드 그래프 시스템' 개발 시 액션 기반 노드를 매우 빠르고 안정적으로 추가할 수 있는 기반이 마련되었습니다.

## 2. 자동화된 테스트 전략 도입

-   **현황**: 프로젝트의 규모와 복잡성에 비해 자동화된 테스트 코드가 절대적으로 부족합니다.
-   **문제점**: 새로운 기능을 추가하거나 리팩토링할 때, 의도치 않은 부작용으로 기존 기능이 고장 날 위험이 매우 큽니다. 이는 "수정했더니 다른 게 망가지는" 현상을 야기하여 개발 속도를 저해하고 안정성을 떨어뜨립니다.
-   **개선 방향**: `Jest`와 `React Testing Library`를 도입하여, 최소한 핵심 로직(Action, Trigger, 엔진 등)에 대한 단위/통합 테스트 작성을 시작하고, 이를 점진적으로 확대해 나갑니다.
-   **왜 시급한가?**: 프로젝트가 더 복잡해지기 전에 안정성의 기반을 다져야 합니다. 테스트 없는 대규모 리팩토링(예: 노드 그래프 시스템 도입)은 재앙으로 이어질 수 있습니다.

## 3. 상태 관리 가이드 문서화

-   **현황**: `AppContext`, `ContextStore`, `electron-store` 등 여러 상태 관리 도구가 있지만, 언제 무엇을 사용해야 하는지에 대한 명확한 가이드가 없습니다.
-   **문제점**: 개발자마다 다른 방식으로 상태를 저장하여 코드의 일관성이 깨지고, 추적이 어려워지며, 불필요한 혼란을 야기합니다.
-   **개선 방향**: 각 상태 관리 도구의 명확한 역할과 사용 사례를 정의하는 `State_Management_Guide.md` 문서를 작성하고, 이를 팀의 코딩 컨벤션으로 삼습니다.
-   **왜 지금 해야 하는가?**: 난이도가 낮고 빠르게 처리할 수 있는 작업이지만, 개발의 일관성을 확보하여 장기적인 유지보수 비용을 줄여주는 효과가 큽니다.

## 4. 노드 그래프 시스템 ("시퀀스") 개발

-   **현황**: 현재는 개별적인 트리거만 만들 수 있어, 복잡하고 유기적인 상호작용을 만드는 데 한계가 있습니다.
-   **개선 방향**: `React Flow`를 기반으로, 사용자가 노드를 시각적으로 연결하여 복잡한 상호작용 로직('시퀀스')을 만들 수 있는 비주얼 스크립팅 시스템을 개발합니다. (상세 내용은 `Vision_Visual_Scripting.md` 참고)
-   **왜 지금이 아닌가?**: 이 과제는 프로젝트의 최종 목표이지만, 매우 큰 작업입니다. 1번(액션 자동화)과 2번(테스트) 과제가 선행되지 않은 상태에서 이 개발에 착수하면, 낮은 생산성과 불안정한 기반 위에서 사상누각을 짓는 격이 될 것입니다. 기반을 다진 후, 집중적으로 진행해야 할 핵심 과제입니다.

## 5. `PluginContext` 불일치 문제 해결

-   **현황**: 코어 플러그인(렌더러)과 유저 모드(메인 프로세스)가 받는 `PluginContext`의 내용물이 달라, 기술적으로 완전한 동등성이 확보되지 않은 상태입니다.
-   **문제점**: "모든 플러그인은 동등하다"는 프로젝트의 핵심 철학에 완벽히 부합하지 않습니다.
-   **개선 방향**:
    -   **단기**: 모든 유용한 기능은 반드시 `Action`으로 만들어 공개하는 원칙을 엄격하게 지켜, 기능적 동등성을 유지합니다.
    -   **장기**: 유저 모드를 렌더러 프로세스 내의 격리된 환경(Web Worker 등)에서 실행하는 방안을 연구하여, 진정한 기술적 동등성을 확보합니다.
-   **왜 시급하지 않은가?**: 단기적인 해결책이 명확하고, 현재 시스템의 안정성에 직접적인 영향을 주지는 않습니다. 이는 프로젝트가 더 성숙해진 후에 도전할 만한, 중요하지만 시급하지는 않은 아키텍처 개선 과제입니다.