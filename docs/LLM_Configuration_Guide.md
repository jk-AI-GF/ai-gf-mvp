# LLM 연동 및 설정 가이드

이 문서는 AI-GF MVP의 챗봇 기능과 연동되는 다양한 LLM(Large Language Model)을 설정하는 방법을 안내합니다. 이제 OpenAI, Google, Anthropic 등 여러 제공사의 모델을 자유롭게 선택하여 사용할 수 있습니다.

## 1. 설정 메뉴 접근

1.  애플리케이션의 사이드바에서 **설정(톱니바퀴 아이콘)** 버튼을 클릭합니다.
2.  설정 모달 창이 나타나면 **'챗봇 LLM API'** 섹션으로 스크롤합니다.

## 2. LLM 설정 옵션 상세

'챗봇 LLM API' 섹션에서는 다음과 같은 옵션들을 설정할 수 있습니다.

### 모델 선택 (Model Selection)

-   **설명**: 챗봇이 사용할 AI 모델을 선택하는 드롭다운 메뉴입니다. 각 옵션은 `모델 이름 (제공사)` 형식으로 표시됩니다.
-   **사용법**: 목록에서 원하는 모델을 선택하세요. 시스템은 선택된 모델에 따라 자동으로 해당 제공사(OpenAI, Google, Anthropic)의 API를 사용합니다.
-   **지원 모델 예시**:
    -   `GPT-4o (OpenAI)`
    -   `Gemini 1.5 Flash (Google)`
    -   `Claude 3.5 Sonnet (Anthropic)`

### API 키 (API Keys)

-   **설명**: 각 LLM 제공사별 API 키를 입력하는 필드입니다. 해당 제공사의 모델을 사용하려면 반드시 올바른 API 키를 입력해야 합니다. 키는 안전하게 비밀번호 형태로 마스킹 처리됩니다.
-   **사용법**:
    -   **OpenAI API 키**: OpenAI(ChatGPT) 모델을 사용하려면 [OpenAI 플랫폼](https://platform.openai.com/api-keys)에서 발급받은 API 키를 입력합니다. (보통 `sk-...`로 시작)
    -   **Google API 키**: Gemini 모델을 사용하려면 [Google AI Studio](https://aistudio.google.com/app/apikey)에서 발급받은 API 키를 입력합니다. (보통 `AIzaSy...`로 시작)
    -   **Anthropic API 키**: Claude 모델을 사용하려면 [Anthropic 콘솔](https://console.anthropic.com/settings/keys)에서 발급받은 API 키를 입력합니다. (보통 `sk-ant-...`로 시작)

### Temperature (온도)

-   **설명**: 모델 응답의 무작위성을 조절하는 값입니다.
    -   **낮은 값 (0.0에 가까움)**: 더 결정적이고 일관된, 예측 가능한 답변을 생성합니다.
    -   **높은 값 (2.0에 가까움)**: 더 창의적이고 다양하며, 예측하기 어려운 답변을 생성합니다.
-   **사용법**: 슬라이더를 움직여 원하는 값을 설정합니다. (기본값: `0.7`)

### Max Tokens (최대 토큰)

-   **설명**: 한 번의 API 호출에서 모델이 생성할 수 있는 답변의 최대 길이를 제한합니다. 토큰은 대략 단어나 문자의 일부에 해당합니다.
-   **사용법**: 숫자 입력 필드에 원하는 최대 토큰 수를 입력합니다. 너무 작은 값은 답변이 중간에 잘릴 수 있고, 너무 큰 값은 응답 시간을 길게 만들 수 있습니다. (기본값: `1024`)

## 3. 작동 방식

사용자가 채팅 메시지를 보내면, `ChatService`는 다음 단계에 따라 작동합니다.

1.  `AppContext`에 저장된 현재 `LlmSettings`를 가져옵니다.
2.  **모델 선택** 값(`selectedModel`)을 기반으로 `SUPPORTED_MODELS` 목록에서 해당 모델의 정보(제공사, 실제 모델 ID)를 조회합니다.
3.  조회된 **제공사**에 해당하는 API 키를 설정에서 가져옵니다.
4.  해당 제공사의 API 명세에 맞게 요청 URL, 헤더, 본문을 동적으로 구성하여 API를 호출합니다.
5.  응답을 파싱하여 사용자에게 보여주고, 표정 태그(`<표정: ...>`)가 있다면 캐릭터의 표정을 변경합니다.

이 구조 덕분에, 모더(Modder)들은 복잡한 API 연동을 신경 쓸 필요 없이, 기존처럼 `pluginContext.actions.playTTS("...")` 함수만 호출하면 현재 설정된 LLM을 통해 캐릭터가 자연스럽게 말하도록 만들 수 있습니다.
